function runGame(){"use strict";const t=13;var o,r,e,n,s,a=0,i=0,c={iResolution:-1,cam:-1,tpos:-1,tscl:-1,ptpos:-1,tut:-1},p={dir:0,pos:{x:3,z:0},tpos:{x:5,z:10},ptpos:{x:0,z:0},tsgot:0,ksDwn:new Set([])};function d(t){return p.ksDwn.has(t)}function u(t,o){return Math.sqrt(t*t+o*o)}function f(o){var r=0;if((d("arrowup")||d("w"))&&(r+=2),(d("arrowdown")||d("s"))&&(r-=1.5),(d("arrowleft")||d("a"))&&(p.dir-=o),(d("arrowright")||d("d"))&&(p.dir+=o),d("shift")&&(r*=2),0!=r){const t=function(t,o,r){const e=Math.sin(r),n=Math.cos(r);return{x:n*t+e*o,z:n*o-e*t}}(0,r*o,p.dir);p.pos.x+=t.x,p.pos.z+=t.z}const e=p.pos.x-p.tpos.x,s=p.pos.z-p.tpos.z;u(e,s)<3.5&&(p.ptpos.x=p.tpos.x,p.ptpos.z=p.tpos.z,p.tpos.x=100*(.5-Math.random()),p.tpos.z=100*(.5-Math.random()),p.tsgot+=1),u(e,s)>50&&u(p.pos.x-p.ptpos.x,p.pos.z-p.ptpos.z)>50&&(console.log(p.tpos),console.log(p.ptpos),p.tsgot=t+1,n.classList.add("open"))}if(e=document.getElementById("start"),n=document.getElementById("lose"),s=document.getElementById("win"),e.classList.remove("open"),o=document.getElementById("game"),null===(r=o.getContext("webgl"))||void 0===r)return void alert("Unable to initialize WebGL. Your browser or computer may not support it.");function l(t,o){const e=r.createShader(o);if(r.shaderSource(e,t),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS)){throw"WebGL compile shdr fail.\n\n"+r.getShaderInfoLog(e)}return e}r.clearColor(.4,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const m=r.createProgram();if(r.attachShader(m,l("\nprecision lowp float;\nattribute vec2 vCoord;\nvoid main(){\ngl_Position=vec4(vCoord,0.,1.);\n}",r.VERTEX_SHADER)),r.attachShader(m,l(fs,r.FRAGMENT_SHADER)),r.linkProgram(m),r.validateProgram(m),!r.getProgramParameter(m,r.LINK_STATUS))throw"WebGL compile pg fail.\n\n"+r.getProgramInfoLog(m);r.useProgram(m);const w=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,w),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,1,-1,1,1,-1,1]),r.STATIC_DRAW);const g=r.getAttribLocation(m,"vCoord");if(g<0)throw"vertexAttribPointer not found";r.enableVertexAttribArray(g),r.vertexAttribPointer(g,2,r.FLOAT,!1,0,0),Object.keys(c).forEach(t=>{const o=r.getUniformLocation(m,t);if(c[t]=o,null===o||o<0)throw t+" uloc not found! "+r.getError()}),r.viewport(0,0,o.width,o.height),window.requestAnimationFrame(function e(n){const d=(n-i)/1e3;a%60==0&&console.log("FPS: "+(1/d).toString().substring(0,5)),f(d),r.uniform2f(c.iResolution,o.width,o.height);const u=Math.sin(p.dir),l=Math.cos(p.dir),m=[l,-u,0,u,l,0,p.pos.x,p.pos.z,0];r.uniformMatrix3fv(c.cam,!1,m),r.uniform2f(c.tpos,p.tpos.x,p.tpos.z),r.uniform2f(c.ptpos,p.ptpos.x,p.ptpos.z),r.uniform1f(c.tscl,1-p.tsgot/(8*t)),r.uniform1f(c.tut,p.tsgot>0?0:1),r.drawArrays(r.TRIANGLES,0,6),p.tsgot<t?requestAnimationFrame(e):s.classList.add("open"),i=n,a+=1});const h=new Set(["arrowup","arrowdown","arrowleft","arrowright","w","a","s","d","shift"]);window.addEventListener("keydown",t=>{const o=t.key.toLowerCase();h.has(o)&&p.ksDwn.add(o)}),window.addEventListener("keyup",t=>{const o=t.key.toLowerCase();h.has(o)&&p.ksDwn.delete(o)})}